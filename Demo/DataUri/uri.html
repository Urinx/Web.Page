<!--
    愿你有生之年，得见我君临天下。
    大二了，会是一个新的开始吗？
    或是继续沉沦，等不到ta的谁。。
    QQ:1336006643
    Date:2013.8.28
    Author:Uri
-->
<meta charset="utf-8">
<link href='http://fonts.googleapis.com/css?family=Satisfy' rel='stylesheet' type='text/css'>
<style type="text/css">
body,div,audio,p{
	padding: 0;
	margin: 0;
}
body{
	background: url(bg.jpg);
	background-size: 100% 100%;
    font-family: Satisfy;
}
header{
    height: 50px;
    background: rgba(0,0,0,0.5);
    text-align: center;
    line-height: 50px;
    font-size: 30px;
    font-weight: bold;
    color: rgba(255,255,255,1);
}
#upload{
    border: none;
    background: rgba(0,0,0,0.2);
    position: absolute;
    top: 130px;
    left: 0;
    width: 400px;
    height: 525px;
    margin-left: 20px;
}
#upload p{
    font-size: 30px;
    color: rgba(255,255,255,1);
    text-align: center;
    border-bottom: 1px dashed rgba(255,255,255,0.5);
}
#upload #result{
    height: 450px;
    border-bottom: 1px dashed rgba(255,255,255,0.5);
}
#upload #result img{
    width: 400px;
    height: 450px;
}
#upload #demo_input{
    float: right;
    background: transparent;
    border: none;
    outline: none;
}
#output{
    border: none;
    background: rgba(0,0,0,0.2);
    position: absolute;
    top: 130px;
    right: 0;
    width: 400px;
    height: 525px;
    margin-right: 20px;
}
#output p{
    font-size: 30px;
    color: rgba(255,255,255,1);
    text-align: center;
    border-bottom: 1px dashed rgba(255,255,255,0.5);
}
#output #uri{
    border: none;
    margin-top: 5px;
    background: transparent;
    color: rgba(255,255,255,0.4);
    outline: none;
}
</style>

<script type="text/javascript">
window.onload = function(){
    var input = document.getElementById("demo_input");
    var result= document.getElementById("result");
    var uri= document.getElementById("uri");

    if ( typeof(FileReader) === 'undefined' ){
            result.innerHTML = "抱歉，你的浏览器不支持 FileReader，请使用现代浏览器操作！";
            input.setAttribute( 'disabled','disabled' );
    } else {
            input.addEventListener( 'change',readFile,false );}
}

function readFile(){
    var file = this.files[0];
    if(/image\/\w+/.test(file.type)){
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function(e){
            result.innerHTML = '<img src="'+this.result+'" alt=""/>';
            uri.value=this.result;
        }
    }
    else if(/text\/\w+/.test(file.type)){
        var reader=new FileReader();
        reader.readAsDataURL(file);
        reader.onload=function(e){
            result.innerHTML='<p src="'+this.result+'"></p>';
        	uri.value=this.result;
        }
    }
        
}
</script>

<body>
    <header>Data Uri 转码</header>

    <div id="upload">
        <p>Upload a File</p>
        <div id="result"></div>
        <input id="demo_input" type="file">
    </div>

    <div id="output">
        <p>Data Uri</p>
        <textarea id="uri" type="text" rows="31" cols="54"></textarea>
    </div>

    <audio autoplay loop controls hidden>
    	<source src="midi.mp3">
    </audio>
</body>